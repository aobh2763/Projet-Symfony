<section id="category-header" class="category-header section">

    <div class="container" data-aos="fade-up">

        <!-- Filter and Sort Options -->
        {{ form_start(filterform, {'attr': {'class': 'filter-container mb-4 row g-3', 'data-aos': 'fade-up', 'data-aos-delay': '100', 'id': 'filterForm'}}) }}

        <div class="col-12 col-md-12 col-lg-4">
            <div class="filter-item search-form">
                {{ form_label(filterform.name, 'Search Products', {'label_attr': {'class': 'form-label'}}) }}
                <div class="input-group">
                    {{ form_widget(filterform.name) }}
                    <button class="btn search-btn" type="submit">
                        <i class="bi bi-search"></i>
                    </button>
                </div>
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-2">
            <div class="filter-item">
                {{ form_label(filterform.limit, 'Limit', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(filterform.limit, {'attr': {'class': 'form-select', 'id': 'limit'}}) }}
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-2">
            <div class="filter-item">
                {{ form_label(filterform.type, 'Type', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(filterform.type, {'attr': {'class': 'form-select', 'id': 'category'}}) }}
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-2">
            <div class="filter-item">
                {{ form_label(filterform.range, 'Price Range', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(filterform.range, {'attr': {'class': 'form-select', 'id': 'priceRange'}}) }}
            </div>
        </div>

        <div class="col-12 col-md-6 col-lg-2">
            <div class="filter-item">
                {{ form_label(filterform.sort, 'Sort By', {'label_attr': {'class': 'form-label'}}) }}
                {{ form_widget(filterform.sort, {'attr': {'class': 'form-select', 'id': 'sortBy'}}) }}
            </div>
        </div>
        {{ form_end(filterform, { 'render_rest': false }) }}

    </div>

</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('filterForm');
    if (!form) return;

    // Submit form when any select changes
    const selects = form.querySelectorAll('select');
    selects.forEach(select => {
        select.addEventListener('change', () => {
            form.submit();
        });
    });

    // Submit form when Enter pressed in search input
    const searchInput = form.querySelector('input[type="text"]');
    if (searchInput) {
        searchInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                e.preventDefault();
                form.submit();
            }
        });
    }
});
</script>
